# sus

zls fuzzing tooling.

```bash
git clone https://github.com/ziglang/zig repos/zig
git clone --recurse-submodules https://github.com/zigtools/zls repos/zls
rm repos/zig/build.zig
Get-ChildItem -Path "repos/zig/test" build.zig -Recurse | Remove-Item
zig build run -- repos/zls/zig-out/bin/zls[.exe] [mode]
# example with 'markov training dir'
zig build run -Dblock-len=8 -- repos/zls/zig-out/bin/zls markov repos/zig/test/
```

# usage

```console
 usage: zig build run <?block len> -- <zls path> <mode> <mode specific arguments>

 * zls path  - required first arg - path to the zls executable
 * mode      - required second arg - one of [markov]

   * mode == markov
     training-dir     - required first arg - directory to be used for training
                        the markov model. searched for .zig files recursively.
     --maxlen         - optional: default=512 - maximum length of each file
                        generated by the markov model.
     --cycles-per-gen - optional: default=25 - how many times to fuzz a random
                        feature before regenerating a new file.

 * block len - optional build parameter: default=8 - applies only when
               mode == markov.  the number of characters considered when
               choosing a random transition.
```

# .env
if a .env file is present at project root or next to the exe, the following keys will be used as default values.  
```console
zls_path=repos/zls/zig-out/bin/zls
mode=markov
markov_training_dir=repos/zig/test/behavior
```

this allows the project to be run with no args:
```console
zig build run
```
